export const SUPPORTED_LOCALES = ["pt", "en"] as const;
export type AppLocale = (typeof SUPPORTED_LOCALES)[number];

export const DEFAULT_LOCALE: AppLocale = "pt";
export const LOCALE_COOKIE_NAME = "app_locale";

type Messages = Record<string, string>;

export const messages: Record<AppLocale, Messages> = {
  pt: {
    "locale.label": "Idioma",
    "locale.pt": "Português",
    "locale.en": "English",

    "shell.marketing": "Marketing",
    "shell.useCases": "Casos de uso",
    "shell.startFree": "Começar grátis",
    "shell.home": "Início",
    "shell.dashboard": "Painel",
    "shell.studioTitle": "macet.ai Studio",
    "shell.studioSubtitle": "Crie clipes curtos a partir de uma única gravação de tutorial",

    "marketing.badge": "Reaproveitamento de vídeo com IA para criadores de tutorial",
    "marketing.heroTitle": "Crie clipes curtos a partir de uma gravação de tutorial.",
    "marketing.heroBody":
      "O macet.ai ajuda tutores, educadores e times de produto a transformar gravações longas em clipes verticais com legendas e metadados para publicação.",
    "marketing.ctaPrimary": "Começar grátis",
    "marketing.ctaSecondary": "Ver como funciona",
    "marketing.step1Title": "1. Envio",
    "marketing.step1Body": "Adicione uma gravação com webcam + tela.",
    "marketing.step2Title": "2. IA seleciona momentos",
    "marketing.step2Body": "Encontre trechos de alto valor para engajamento.",
    "marketing.step3Title": "3. Exportar",
    "marketing.step3Body": "Baixe clipes e pacote de metadados.",
    "marketing.builtForTitle": "Feito para",
    "marketing.builtForBody": "Páginas de caso de uso para fluxos específicos de criadores.",
    "marketing.builtFor1": "Criadores de programação",
    "marketing.builtFor2": "Tutores dev",
    "marketing.builtFor3": "Educadores de cursos",
    "marketing.builtFor4": "Times de demo SaaS",
    "marketing.open": "Abrir",
    "marketing.feature1Title": "Layout em tela dividida",
    "marketing.feature1Body": "Mostre contexto da webcam e detalhes da tela em um único clipe 9:16.",
    "marketing.feature2Title": "Legendas automáticas",
    "marketing.feature2Body": "Legendas queimadas melhoram clareza e retenção.",
    "marketing.feature3Title": "Sugestões de clipes com IA",
    "marketing.feature3Body": "Encontre momentos que valem post sem scrub manual.",
    "marketing.feature4Title": "Pacote de publicação",
    "marketing.feature4Body": "Copie título, ganchos e hashtags para cada plataforma.",
    "marketing.trustedTitle": "Confiado por criadores iniciais",
    "marketing.quote1": "A produção semanal dobrou com um único fluxo de gravação.",
    "marketing.quote2": "Nosso time de tutoriais agora publica clipes no mesmo dia.",
    "marketing.quote3": "O pacote de metadados removeu gargalos de postagem.",
    "marketing.faqTitle": "FAQ",
    "marketing.readyTitle": "Pronto para publicar seu próximo lote de clipes?",
    "marketing.readyBody": "Comece com uma gravação e exporte seu primeiro short em minutos.",

    "dashboard.loadingTitle": "Carregando painel",
    "dashboard.loadingBody": "Verificando sua sessão.",
    "dashboard.signInTitle": "Entre para continuar",
    "dashboard.signInBody":
      "O painel é privado. Use sua conta para acessar uploads, status de processamento e exportações.",
    "dashboard.signIn": "Entrar",
    "dashboard.createAccount": "Criar conta",
    "dashboard.authHelp":
      "Use autenticação com e-mail/senha por enquanto. Você pode ajustar provedores depois no Supabase.",
    "dashboard.signedIn": "Sessão iniciada.",
    "dashboard.accountCreated": "Conta criada. Verifique seu e-mail se a confirmação estiver ativa.",
    "dashboard.title": "Painel",
    "dashboard.subtitle": "Gerencie vídeos, monitore status e gere clipes.",
    "dashboard.newVideo": "Novo vídeo",
    "dashboard.totalVideos": "Total de vídeos",
    "dashboard.processing": "Processando",
    "dashboard.completed": "Concluídos",
    "dashboard.failed": "Falharam",
    "dashboard.videoProcessing": "Processamento de vídeos",
    "dashboard.videoProcessingBody": "Acompanhe cada upload até os clipes finais.",
    "dashboard.all": "Todos",
    "dashboard.filterStatus": "Filtrar status",
    "dashboard.allStatuses": "Todos os status",
    "dashboard.pending": "Pendente",
    "dashboard.uploaded": "Enviado",
    "dashboard.ready": "Pronto para processar",
    "dashboard.done": "Concluído",
    "dashboard.preview": "Prévia",
    "dashboard.file": "Arquivo",
    "dashboard.status": "Status",
    "dashboard.created": "Criado em",
    "dashboard.expires": "Expira em",
    "dashboard.action": "Ação",
    "dashboard.open": "Abrir",
    "dashboard.empty": "Nenhum vídeo encontrado. Envie um vídeo para iniciar seu pipeline.",
    "dashboard.currentlyProcessing": "Processando agora:",
    "dashboard.authEmailPlaceholder": "voce@exemplo.com",
    "dashboard.authEmailAria": "E-mail",
    "dashboard.authPasswordPlaceholder": "Sua senha",
    "dashboard.authPasswordAria": "Senha",
    "dashboard.previewAria": "Prévia de",

    "upload.title": "Novo vídeo",
    "upload.body": "Envie uma gravação de tutorial para começar a gerar clipes.",
    "upload.dropTitle": "Arraste e solte seu vídeo",
    "upload.dropBody": "MP4 recomendado. Plano grátis suporta até 60 minutos no total.",
    "upload.selected": "Selecionado:",
    "upload.detectedDuration": "Duração detectada",
    "upload.detecting": "Detectando duração pelos metadados do arquivo...",
    "upload.detectedFormat": "(detectado automaticamente pelos metadados)",
    "upload.detectingHelp": "O envio é liberado quando a duração for detectada.",
    "upload.uploadVideo": "Enviar vídeo",
    "upload.cancel": "Cancelar",
    "upload.preparing": "Preparando envio...",
    "upload.uploading": "Enviando vídeo...",
    "upload.complete": "Upload concluído. Abra o job e clique em Gerar.",
    "upload.cancelled": "Upload cancelado.",
    "upload.fileInputAria": "Escolher arquivo de vídeo",
    "upload.progressAria": "Progresso do envio",
    "upload.metadataError": "Não foi possível ler os metadados do vídeo",
    "upload.signError": "Não foi possível autorizar o upload",
    "upload.uploadFailed": "Falha no upload",
    "upload.unknownError": "erro desconhecido",
    "upload.statusUpdateError": "Upload salvo, mas falhou ao atualizar o status do job",

    "job.workspace": "Workspace do vídeo",
    "job.workspaceBody": "Configure recorte, inicie processamento e colete exports.",
    "job.previewTitle": "Prévia e recorte",
    "job.previewBody": "Ajuste valores do recorte da webcam antes de gerar.",
    "job.previewHelp": "A prévia ajuda a validar enquadramento antes da geração.",
    "job.captionStyle": "Estilo de legenda",
    "job.captionLanguage": "Idioma da legenda",
    "job.outputFormat": "Formato de saída",
    "job.outputPreset.instagramReels": "Instagram Reels (9:16)",
    "job.outputPreset.youtubeShorts": "YouTube Shorts (9:16)",
    "job.outputPreset.tiktok": "TikTok (9:16)",
    "job.outputPreset.instagramFeed": "Instagram Feed (4:5)",
    "job.bold": "Negrito",
    "job.clean": "Limpo",
    "job.modern": "Moderno",
    "job.minimal": "Minimalista",
    "job.saveCrop": "Salvar recorte",
    "job.reset": "Resetar",
    "job.generate": "Gerar clipes",
    "job.queueing": "Enfileirando vídeo...",
    "job.queued": "Vídeo enfileirado para processamento.",
    "job.failed": "Falha no processamento:",
    "job.processingTitle": "Status do processamento",
    "job.processingBody": "As etapas atualizam enquanto o worker executa.",
    "job.currentStep": "Etapa atual:",
    "job.refreshing": "Atualizando status...",
    "job.inProgress": "em andamento",
    "job.doneState": "concluído",
    "job.pendingState": "pendente",
    "job.results": "Resultados",
    "job.resultsBody": "Baixe clipes e copie metadados para publicação manual.",
    "job.noClips": "Ainda não há clipes. Inicie a geração para produzir exports.",
    "job.available72h": "Disponível por 72h",
    "job.download": "Baixar",
    "job.copyTitle": "Copiar título",
    "job.copyHashtags": "Copiar hashtags",
    "job.sourcePreviewAria": "Prévia do vídeo de origem",
    "job.clipPreviewAria": "Prévia do clipe",
    "job.copyTitleToast": "Título copiado",
    "job.copyHashtagsToast": "Hashtags copiadas",
    "job.viralityScore": "Pontuação de viralidade",
    "job.viralityBand": "Nível:",
    "job.viralityBand.high": "alto",
    "job.viralityBand.medium": "médio",
    "job.viralityBand.low": "baixo",
    "job.trimTitle": "Ajustar tempo do clipe",
    "job.playhead": "Cursor:",
    "job.trimStart": "Início (s)",
    "job.trimEnd": "Fim (s)",
    "job.adjustClip": "Aplicar ajuste",
    "job.adjustingClip": "Ajustando...",
    "job.cancelAdjustClip": "Cancelar",
    "job.openTimelineEditor": "Cortar / expandir clipe",
    "job.timelineEntryHint": "Se o corte ficou errado, abra o editor para ajustar início e fim.",
    "job.timelineEditorBody": "Arraste os controles para ajustar início e fim do clipe.",
    "job.editingClipId": "Editando",
    "job.editWindow": "Janela de edição:",
    "job.markIn": "Definir início no cursor",
    "job.markOut": "Definir fim no cursor",
    "job.nudgeInBack": "Início -0.5s",
    "job.nudgeInForward": "Início +0.5s",
    "job.nudgeOutBack": "Fim -0.5s",
    "job.nudgeOutForward": "Fim +0.5s",
    "job.goToIn": "Ir para início",
    "job.goToOut": "Ir para fim",
    "job.previewSelection": "Prévia seleção",
    "job.pausePreview": "Pausar",
    "job.resetSelection": "Resetar seleção",
    "job.adjustClipSuccess": "Clipe atualizado",
    "job.adjustClipError": "Não foi possível ajustar o clipe",
    "job.adjustClipInvalid": "Defina início e fim válidos (fim maior que início)",
    "job.queueError": "Não foi possível enfileirar o vídeo",
    "job.processingSteps.transcribing": "Transcrevendo",
    "job.processingSteps.selecting": "Selecionando clipes",
    "job.processingSteps.rendering": "Renderizando exports",

    "useCases.metaTitle": "Casos de uso",
    "useCases.metaDescription": "Landing pages SEO para criadores de tutoriais usando macet.ai.",
    "useCases.ogTitle": "Casos de uso macet.ai",
    "useCases.ogDescription": "Encontre o melhor fluxo do macet.ai para o seu nicho de tutorial.",
    "useCases.title": "Casos de uso",
    "useCases.body": "Escolha um fluxo com base no seu tipo de conteúdo e canal de publicação.",
    "useCases.readCase": "Ver caso de uso",
    "useCase.badge": "Caso de uso",
    "useCase.try": "Testar macet.ai",
    "useCase.back": "Voltar para todos os casos",
    "useCase.whyWorks": "Por que esse fluxo funciona",
    "useCase.faqTitle": "Perguntas frequentes"
  },
  en: {
    "locale.label": "Language",
    "locale.pt": "Portuguese",
    "locale.en": "English",

    "marketing.builtForTitle": "Built for",
    "marketing.builtForBody": "Use-case pages for specific creator workflows.",
    "marketing.builtFor1": "Coding creators",
    "marketing.builtFor2": "Dev tutors",
    "marketing.builtFor3": "Course educators",
    "marketing.builtFor4": "SaaS demo teams",
    "marketing.open": "Open",
    "marketing.feature1Title": "Split-screen layout",
    "marketing.feature1Body": "Show webcam context and screen detail in one 9:16 clip.",
    "marketing.feature2Title": "Auto captions",
    "marketing.feature2Body": "Burned captions improve clarity and retention.",
    "marketing.feature3Title": "AI clip suggestions",
    "marketing.feature3Body": "Find moments worth posting without manual scrubbing.",
    "marketing.feature4Title": "Publish pack",
    "marketing.feature4Body": "Copy title, hooks, and hashtags for each platform.",
    "marketing.trustedTitle": "Trusted by early creators",
    "marketing.quote1": "Weekly output doubled with one recording workflow.",
    "marketing.quote2": "Our tutorial team now ships clips the same day.",
    "marketing.quote3": "Metadata pack removed posting bottlenecks.",
    "marketing.faqTitle": "FAQ",

    "dashboard.authEmailPlaceholder": "you@example.com",
    "dashboard.authEmailAria": "Email",
    "dashboard.authPasswordPlaceholder": "Your password",
    "dashboard.authPasswordAria": "Password",
    "dashboard.previewAria": "Preview of",

    "upload.fileInputAria": "Choose video file",
    "upload.progressAria": "Upload progress",
    "upload.metadataError": "Could not read video metadata",
    "upload.signError": "Could not sign upload",
    "upload.uploadFailed": "Upload failed",
    "upload.unknownError": "unknown error",
    "upload.statusUpdateError": "Upload saved, but job status update failed",

    "job.doneState": "done",
    "job.pendingState": "pending",
    "job.sourcePreviewAria": "Source video preview",
    "job.clipPreviewAria": "Clip preview",
    "job.outputFormat": "Output format",
    "job.captionLanguage": "Caption language",
    "job.outputPreset.instagramReels": "Instagram Reels (9:16)",
    "job.outputPreset.youtubeShorts": "YouTube Shorts (9:16)",
    "job.outputPreset.tiktok": "TikTok (9:16)",
    "job.outputPreset.instagramFeed": "Instagram Feed (4:5)",
    "job.bold": "Bold",
    "job.clean": "Clean",
    "job.modern": "Modern",
    "job.minimal": "Minimal",
    "job.copyTitleToast": "Title copied",
    "job.copyHashtagsToast": "Hashtags copied",
    "job.viralityScore": "Virality score",
    "job.viralityBand": "Level:",
    "job.viralityBand.high": "high",
    "job.viralityBand.medium": "medium",
    "job.viralityBand.low": "low",
    "job.trimTitle": "Adjust clip timing",
    "job.playhead": "Playhead:",
    "job.trimStart": "Start (s)",
    "job.trimEnd": "End (s)",
    "job.adjustClip": "Apply adjustment",
    "job.adjustingClip": "Adjusting...",
    "job.cancelAdjustClip": "Cancel",
    "job.openTimelineEditor": "Trim / expand clip",
    "job.timelineEntryHint": "If the cut is wrong, open the editor to adjust start and end.",
    "job.timelineEditorBody": "Drag the controls to adjust clip start and end.",
    "job.editingClipId": "Editing",
    "job.editWindow": "Edit window:",
    "job.markIn": "Set start at playhead",
    "job.markOut": "Set end at playhead",
    "job.nudgeInBack": "Start -0.5s",
    "job.nudgeInForward": "Start +0.5s",
    "job.nudgeOutBack": "End -0.5s",
    "job.nudgeOutForward": "End +0.5s",
    "job.goToIn": "Go to start",
    "job.goToOut": "Go to end",
    "job.previewSelection": "Preview selection",
    "job.pausePreview": "Pause",
    "job.resetSelection": "Reset selection",
    "job.adjustClipSuccess": "Clip updated",
    "job.adjustClipError": "Could not adjust clip",
    "job.adjustClipInvalid": "Enter a valid range (end must be greater than start)",
    "job.queueError": "Could not queue video",

    "useCases.metaTitle": "Use Cases",
    "useCases.metaDescription": "SEO landing pages for tutorial creators using macet.ai.",
    "useCases.ogTitle": "macet.ai Use Cases",
    "useCases.ogDescription": "Find the best macet.ai workflow for your tutorial niche.",
    "useCases.title": "Use Cases",
    "useCases.body": "Choose a workflow based on your content type and publishing channel.",
    "useCases.readCase": "Read use case",
    "useCase.badge": "Use case",
    "useCase.try": "Try macet.ai",
    "useCase.back": "Back to all use cases",
    "useCase.whyWorks": "Why this workflow works",
    "useCase.faqTitle": "Frequently asked questions"
  }
};

for (const [k, v] of Object.entries(messages.pt)) {
  if (!messages.en[k]) messages.en[k] = v;
}

export function normalizeLocale(value?: string | null): AppLocale {
  if (!value) return DEFAULT_LOCALE;
  const lower = value.toLowerCase();
  if (lower.startsWith("pt")) return "pt";
  if (lower.startsWith("en")) return "en";
  return DEFAULT_LOCALE;
}

export function t(locale: AppLocale, key: string, fallback?: string) {
  return messages[locale][key] || messages[DEFAULT_LOCALE][key] || fallback || key;
}
